<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <title>Chupa Manage Page</title>
        <meta name='viewport' content='width=device-width' />
        <!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js"></script><![endif]-->

    </head>
    <body>
        
        <div>
            <center>
                <img src='./img/splash_copy.png'/>
                <div>
                    <table>
                        <tr>
                            <td><label>ID<label></td>
                            <td><input id='id_id' type='text'/></td>
                        </tr>
                        <tr>
                            <td><label>PW<label></td>
                            <td><input id='id_pw' type='password'/></td>
                        </tr>
                        <tr>
                            <td><label><label></td>
                            <td><input id='id_btn' type='button' value='Login' style='width: 100%;'/></td>
                        </tr>
                    </table>
                </div>
            </center>
        </div>



        <script src='http://code.jquery.com/jquery-2.1.0.min.js'></script>
        <script src='http://ajax.aspnetcdn.com/ajax/mobileservices/MobileServices.Web-1.2.2.min.js'></script>
        <script src='./myjs/helper.js'></script>
        <script>
        (function(){
            var mClient = new MobileClient('https://athere.azure-mobile.net/', 'AyHtUuHXEwDSTuuLvvSYZtVSQZxtnT17');
            var squareHelper = new SquareHelper(mClient.getClient());
            
            var list = null;
            squareHelper.list({
                success: function(results) {
                    list = results;
                }, error : function (err) {
                    alert(err);
                }
            });

            function check () {
                var idVal = $('#id_id').val();
                var pwVal = $('#id_pw').val();
                var goFlag = false;


                if (idVal == 'pinthecloud' && pwVal == 'gcw1234!') {
                    window.location.href = './pages/admin_page.html';
                    return;   
                }

                if (idVal != pwVal) {
                    alert('존재하지 않는 유저입니다.');
                    return;
                }
                
                for (var i = 0 ; i < list.length ; i++) {
                    
                    if (list[i].whoMade == idVal) {
                        window.location.href = './pages/owner_page.html';
                        return;
                    }
                        
                }    
                alert('존재하지 않는 유저입니다.');
            }
            
            $('#id_btn').click(function () {
                check();  
            });

            $('#id_pw').bind('keypress', function(e) {
                var code = e.keyCode || e.which;
                 if(code == 13) { //Enter keycode
                    check();
                 }
            });

        })();
        </script>
    </body>
</html>